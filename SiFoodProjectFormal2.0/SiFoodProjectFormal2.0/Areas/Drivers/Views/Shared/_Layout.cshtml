<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - sifoodprojectformal2._0</title>
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/SiFoodProjectFormal2.0.styles.css" asp-append-version="true" />
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <!-- Favicon icon-->
    <link rel="shortcut icon" type="image/x-icon" href="~/images/favicon.ico" />
    <!-- Theme CSS -->
    <link rel="stylesheet" href="~/assets/css/theme.min.css" />
    <style>
        .container {
            /* max-width: 420px; */
            /* margin: 20px auto; */
            background-color: #fff;
            /* border: 1px solid #ccc; */
            /* border-radius: 5px; */
            /* padding: 20px; */
            height: min-content;
        }
        .order-category {
            cursor: pointer;
            background-color: rgb(217, 240, 170);
        }
        .order-details {
            /* padding: 5px; */
            /* display: none; */
            background-color: #f9f9f9;
            overflow: auto;
            /* max-height: 200px; */
        }
        .order-details1 {
            display: 0;
            padding: 10px;
            background-color: #ffffff;
            border: 1px solid #98e99b;
            border-radius: 5px;
            margin-top: 10px;
        }
        .box0 {
            background-color: #E8FFF5;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .box0 img {
             height: 40px;
        }
        .box0 img:last-child,.box0 button {
            margin-left: auto;
            height: 40px;
        }
        #map {
            width: 100%;
            height: 50vh;
        }
        .custom-map-control-button {
            background-color: #fff;
            border: 0;
            border-radius: 2px;
            box-shadow: 0 1px 4px -1px rgba(0, 0, 0, 0.3);
            margin: 10px;
            padding: 0 0.5em;
            font: 400 18px Roboto, Arial, sans-serif;
            overflow: hidden;
            height: 40px;
            cursor: pointer;
        }
        .custom-map-control-button:hover {
             background: rgb(235, 235, 235);
        }
    </style>
    @await RenderSectionAsync("Styles", required: false)
</head>
<body>
    <div class="container">
        <div class="sticky-sm-top box0">
            <a href='/Drivers/Home/OrderList/'><img src="~/assets/images/logo/SiFood_logo_BGclear.png" class="rounded float-start" alt="logo" height="40px"></a>
            <button class="btn btn-primary rounded float-end">登出</button>
        </div>
        <div id="driverMap">
            <section id="map">
            </section>
        </div>
        <div>
            <main role="main" class="pb-3">
                @RenderBody()
            </main>
        </div>
    </div>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <!-- Javascript-->
    <script src="~/assets/libs/jquery/dist/jquery.min.js" asp-append-version="true"></script>
    <script src="~/assets/js/theme.min.js" asp-append-version="true"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.0/axios.min.js" integrity="sha512-WrdC3CE9vf1nBf58JHepuWT4x24uTacky9fuzw2g/3L9JkihgwZ6Cfv+JGTtNyosOhEmttMtEZ6H3qJWfI7gIQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAN9KFcDFxucoV9IglJyqQSd_d1GLWHiYI" async defer></script>
    <script src="https://unpkg.com/vue@3.2.36/dist/vue.global.js"></script>
    <script>
        var setDriverMap = Vue.createApp({
            data: function () {
                return {
                    map: null,
                }
            },
            mounted() {
                this.getLocation();
                window.addEventListener('load', () => {
                    this.setMap();
                });
            },
            methods: {
                getLocation() {
                    if (navigator.geolocation) {
                        navigator.geolocation.getCurrentPosition(this.showPosition);
                    }
                    else {
                        alert("不支持你的地理位置。");
                    }
                },
                showPosition(position) {
                    this.current = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    }
                },
                setMap() {
                    let location = {
                        lat: 25.0374865, // 經度
                        lng: 121.5647688 // 緯度
                    };
                    this.map = new google.maps.Map(document.getElementById('map'), {
                        center: this.current == null ? location : this.current,
                        zoom: 16,
                        mapTypeId: 'terrain',
                        mapTypeControl: false,
                        fullscreenControl: false
                    });
                    let currentLocation = new google.maps.Marker({
                        position: this.current == null ? location : this.current,
                        icon: "https://img.onl/195tB0",
                        map: this.map
                    });
                }
            },
        }).mount("#driverMap");
    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>


