@section Styles{

    <!-- Favicon icon-->
    <link rel="shortcut icon" type="image/x-icon" href="~/assets/images/favicon/favicon.ico">


    <!-- Libs CSS -->
    <link href="~/assets/libs/bootstrap-icons/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="~/assets/libs/feather-webfont/dist/feather-icons.css" rel="stylesheet">
    <link href="~/assets/libs/simplebar/dist/simplebar.min.css" rel="stylesheet">


    <!-- Theme CSS -->
    <link rel="stylesheet" href="~/assets/css/theme.min.css">

}
@{
    ViewData["Title"] = "RealTimeOrders";
}

<body>


    <!-- Modal -->
@*     <div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="userModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content p-4">
                <div class="modal-header border-0">
                    <h5 class="modal-title fs-3 fw-bold" id="userModalLabel">Sign Up</h5>

                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="fullName" class="form-label">Name</label>
                            <input type="text" class="form-control" id="fullName" placeholder="Enter Your Name" required="">
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email address</label>
                            <input type="email" class="form-control" id="email" placeholder="Enter Email address" required="">
                        </div>

                        <div class="mb-5">
                            <label for="password" class="form-label">Password</label>
                            <input type="password" class="form-control" id="password" placeholder="Enter Password" required="">
                            <small class="form-text">
                                By Signup, you agree to our <a href="#!">Terms of Service</a> & <a href="#!">Privacy Policy</a>
                            </small>
                        </div>

                        <button type="submit" class="btn btn-primary">Sign Up</button>
                    </form>
                </div>
                <div class="modal-footer border-0 justify-content-center">

                    Already have an account? <a href="#">Sign in</a>
                </div>
            </div>
        </div>
    </div>
 *@


    <!-- Shop Cart -->

@*     <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
        <div class="offcanvas-header border-bottom">
            <div class="text-start">
                <h5 id="offcanvasRightLabel" class="mb-0 fs-4">Shop Cart</h5>
                <small>Location in 382480</small>
            </div>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">

            <div class="">
                <!-- alert -->
                <div class="alert alert-danger p-2" role="alert">
                    You’ve got FREE delivery. Start <a href="#!" class="alert-link">checkout now!</a>
                </div>
                <ul class="list-group list-group-flush">
                    <!-- list group -->
                    <li class="list-group-item py-3 ps-0 border-top">
                        <!-- row -->
                        <div class="row align-items-center">

                            <div class="col-6 col-md-6 col-lg-7">
                                <div class="d-flex">
                                    <img src="~/assets/images/products/product-img-1.jpg" alt="Ecommerce"
                                         class="icon-shape icon-xxl">
                                    <div class="ms-3">
                                        <!-- title -->
                                        <a href="~/pages/shop-single.html" class="text-inherit">
                                            <h6 class="mb-0">Haldiram's Sev Bhujia</h6>
                                        </a>
                                        <span><small class="text-muted">.98 / lb</small></span>
                                        <!-- text -->
                                        <div class="mt-2 small lh-1">
                                            <a href="#!" class="text-decoration-none text-inherit">
                                                <span class="me-1 align-text-bottom">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                                                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                         class="feather feather-trash-2 text-success">
                                                        <polyline points="3 6 5 6 21 6"></polyline>
                                                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                                        </path>
                                                        <line x1="10" y1="11" x2="10" y2="17"></line>
                                                        <line x1="14" y1="11" x2="14" y2="17"></line>
                                                    </svg>
                                                </span><span class="text-muted">Remove</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- input group -->
                            <div class="col-4 col-md-3 col-lg-3">
                                <!-- input -->
                                <!-- input -->
                                <div class="input-group input-spinner  ">
                                    <input type="button" value="-" class="button-minus  btn  btn-sm " data-field="quantity">
                                    <input type="number" step="1" max="10" value="1" name="quantity"
                                           class="quantity-field form-control-sm form-input   ">
                                    <input type="button" value="+" class="button-plus btn btn-sm " data-field="quantity">
                                </div>

                            </div>
                            <!-- price -->
                            <div class="col-2 text-lg-end text-start text-md-end col-md-2">
                                <span class="fw-bold">$5.00</span>

                            </div>
                        </div>

                    </li>
                    <!-- list group -->
                    <li class="list-group-item py-3 ps-0">
                        <!-- row -->
                        <div class="row align-items-center">
                            <div class="col-6 col-md-6 col-lg-7">
                                <div class="d-flex">
                                    <img src="~/assets/images/products/product-img-2.jpg" alt="Ecommerce"
                                         class="icon-shape icon-xxl">
                                    <div class="ms-3">
                                        <a href="~/pages/shop-single.html" class="text-inherit">
                                            <h6 class="mb-0">NutriChoice Digestive </h6>
                                        </a>
                                        <span><small class="text-muted">250g</small></span>
                                        <!-- text -->
                                        <div class="mt-2 small lh-1">
                                            <a href="#!" class="text-decoration-none text-inherit">
                                                <span class="me-1 align-text-bottom">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                                                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                         class="feather feather-trash-2 text-success">
                                                        <polyline points="3 6 5 6 21 6"></polyline>
                                                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                                        </path>
                                                        <line x1="10" y1="11" x2="10" y2="17"></line>
                                                        <line x1="14" y1="11" x2="14" y2="17"></line>
                                                    </svg>
                                                </span><span class="text-muted">Remove</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!-- input group -->
                            <div class="col-4 col-md-3 col-lg-3">
                                <!-- input -->
                                <!-- input -->
                                <div class="input-group input-spinner  ">
                                    <input type="button" value="-" class="button-minus  btn  btn-sm " data-field="quantity">
                                    <input type="number" step="1" max="10" value="1" name="quantity"
                                           class="quantity-field form-control-sm form-input   ">
                                    <input type="button" value="+" class="button-plus btn btn-sm " data-field="quantity">
                                </div>
                            </div>
                            <!-- price -->
                            <div class="col-2 text-lg-end text-start text-md-end col-md-2">
                                <span class="fw-bold text-danger">$20.00</span>
                                <div class="text-decoration-line-through text-muted small">$26.00</div>
                            </div>
                        </div>

                    </li>
                    <!-- list group -->
                    <li class="list-group-item py-3 ps-0">
                        <!-- row -->
                        <div class="row align-items-center">

                            <div class="col-6 col-md-6 col-lg-7">
                                <div class="d-flex">
                                    <img src="~/assets/images/products/product-img-3.jpg" alt="Ecommerce"
                                         class="icon-shape icon-xxl">
                                    <div class="ms-3">
                                        <!-- title -->
                                        <a href="~/pages/shop-single.html" class="text-inherit">
                                            <h6 class="mb-0">Cadbury 5 Star Chocolate</h6>
                                        </a>
                                        <span><small class="text-muted">1 kg</small></span>
                                        <!-- text -->
                                        <div class="mt-2 small lh-1">
                                            <a href="#!" class="text-decoration-none text-inherit">
                                                <span class="me-1 align-text-bottom">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                                                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                         class="feather feather-trash-2 text-success">
                                                        <polyline points="3 6 5 6 21 6"></polyline>
                                                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                                        </path>
                                                        <line x1="10" y1="11" x2="10" y2="17"></line>
                                                        <line x1="14" y1="11" x2="14" y2="17"></line>
                                                    </svg>
                                                </span><span class="text-muted">Remove</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- input group -->
                            <div class="col-4 col-md-3 col-lg-3">
                                <!-- input -->
                                <!-- input -->
                                <div class="input-group input-spinner  ">
                                    <input type="button" value="-" class="button-minus  btn  btn-sm " data-field="quantity">
                                    <input type="number" step="1" max="10" value="1" name="quantity"
                                           class="quantity-field form-control-sm form-input   ">
                                    <input type="button" value="+" class="button-plus btn btn-sm " data-field="quantity">
                                </div>
                            </div>
                            <!-- price -->
                            <div class="col-2 text-lg-end text-start text-md-end col-md-2">
                                <span class="fw-bold">$15.00</span>
                                <div class="text-decoration-line-through text-muted small">$20.00</div>
                            </div>
                        </div>

                    </li>
                    <!-- list group -->
                    <li class="list-group-item py-3 ps-0">
                        <!-- row -->
                        <div class="row align-items-center">
                            <div class="col-6 col-md-6 col-lg-7">
                                <div class="d-flex">
                                    <img src="~/assets/images/products/product-img-4.jpg" alt="Ecommerce"
                                         class="icon-shape icon-xxl">
                                    <div class="ms-3">
                                        <!-- title -->
                                        <!-- title -->
                                        <a href="~/pages/shop-single.html" class="text-inherit">
                                            <h6 class="mb-0">Onion Flavour Potato</h6>
                                        </a>
                                        <span><small class="text-muted">250g</small></span>
                                        <!-- text -->
                                        <div class="mt-2 small lh-1">
                                            <a href="#!" class="text-decoration-none text-inherit">
                                                <span class="me-1 align-text-bottom">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                                                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                         class="feather feather-trash-2 text-success">
                                                        <polyline points="3 6 5 6 21 6"></polyline>
                                                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                                        </path>
                                                        <line x1="10" y1="11" x2="10" y2="17"></line>
                                                        <line x1="14" y1="11" x2="14" y2="17"></line>
                                                    </svg>
                                                </span><span class="text-muted">Remove</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- input group -->
                            <div class="col-4 col-md-3 col-lg-3">
                                <!-- input -->
                                <!-- input -->
                                <div class="input-group input-spinner  ">
                                    <input type="button" value="-" class="button-minus  btn  btn-sm " data-field="quantity">
                                    <input type="number" step="1" max="10" value="1" name="quantity"
                                           class="quantity-field form-control-sm form-input   ">
                                    <input type="button" value="+" class="button-plus btn btn-sm " data-field="quantity">
                                </div>
                            </div>
                            <!-- price -->
                            <div class="col-2 text-lg-end text-start text-md-end col-md-2">
                                <span class="fw-bold">$15.00</span>
                                <div class="text-decoration-line-through text-muted small">$20.00</div>
                            </div>
                        </div>

                    </li>
                    <!-- list group -->
                    <li class="list-group-item py-3 ps-0 border-bottom">
                        <!-- row -->
                        <div class="row align-items-center">
                            <div class="col-6 col-md-6 col-lg-7">
                                <div class="d-flex">
                                    <img src="~/assets/images/products/product-img-5.jpg" alt="Ecommerce"
                                         class="icon-shape icon-xxl">
                                    <div class="ms-3">
                                        <!-- title -->
                                        <a href="~/pages/shop-single.html" class="text-inherit">
                                            <h6 class="mb-0">Salted Instant Popcorn </h6>
                                        </a>
                                        <span><small class="text-muted">100g</small></span>
                                        <!-- text -->
                                        <div class="mt-2 small lh-1">
                                            <a href="#!" class="text-decoration-none text-inherit">
                                                <span class="me-1 align-text-bottom">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                                                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                         class="feather feather-trash-2 text-success">
                                                        <polyline points="3 6 5 6 21 6"></polyline>
                                                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                                        </path>
                                                        <line x1="10" y1="11" x2="10" y2="17"></line>
                                                        <line x1="14" y1="11" x2="14" y2="17"></line>
                                                    </svg>
                                                </span><span class="text-muted">Remove</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- input group -->
                            <div class="col-4 col-md-3 col-lg-3">
                                <!-- input -->
                                <!-- input -->
                                <div class="input-group input-spinner  ">
                                    <input type="button" value="-" class="button-minus  btn  btn-sm " data-field="quantity">
                                    <input type="number" step="1" max="10" value="1" name="quantity"
                                           class="quantity-field form-control-sm form-input   ">
                                    <input type="button" value="+" class="button-plus btn btn-sm " data-field="quantity">
                                </div>
                            </div>
                            <!-- price -->
                            <div class="col-2 text-lg-end text-start text-md-end col-md-2">
                                <span class="fw-bold">$15.00</span>
                                <div class="text-decoration-line-through text-muted small">$25.00</div>
                            </div>
                        </div>

                    </li>

                </ul>
                <!-- btn -->
                <div class="d-flex justify-content-between mt-4">
                    <a href="#!" class="btn btn-primary">Continue Shopping</a>
                    <a href="#!" class="btn btn-dark">Update Cart</a>
                </div>

            </div>
        </div>
    </div>
 *@
    <!-- Modal -->
@*     <div class="modal fade" id="locationModal" tabindex="-1" aria-labelledby="locationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm modal-dialog-centered">
            <div class="modal-content">

                <div class="modal-body p-6">
                    <div class="d-flex justify-content-between align-items-start ">
                        <div>
                            <h5 class="mb-1" id="locationModalLabel">Choose your Delivery Location</h5>
                            <p class="mb-0 small">Enter your address and we will specify the offer you area. </p>
                        </div>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="my-5">
                        <input type="search" class="form-control" placeholder="Search your area">
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <h6 class="mb-0">Select Location</h6>
                        <a href="#" class="btn btn-outline-gray-400 text-muted btn-sm">Clear All</a>


                    </div>
                    <div>
                        <div data-simplebar style="height:300px;">
                            <div class="list-group list-group-flush">

                                <a href="#"
                                   class="list-group-item d-flex justify-content-between align-items-center px-2 py-3 list-group-item-action active">
                                    <span>Alabama</span><span>Min:$20</span>
                                </a>
                                <a href="#"
                                   class="list-group-item d-flex justify-content-between align-items-center px-2 py-3 list-group-item-action">
                                    <span>Alaska</span><span>Min:$30</span>
                                </a>
                                <a href="#"
                                   class="list-group-item d-flex justify-content-between align-items-center px-2 py-3 list-group-item-action">
                                    <span>Arizona</span><span>Min:$50</span>
                                </a>
                                <a href="#"
                                   class="list-group-item d-flex justify-content-between align-items-center px-2 py-3 list-group-item-action">
                                    <span>California</span><span>Min:$29</span>
                                </a>
                                <a href="#"
                                   class="list-group-item d-flex justify-content-between align-items-center px-2 py-3 list-group-item-action">
                                    <span>Colorado</span><span>Min:$80</span>
                                </a>
                                <a href="#"
                                   class="list-group-item d-flex justify-content-between align-items-center px-2 py-3 list-group-item-action">
                                    <span>Florida</span><span>Min:$90</span>
                                </a>
                                <a href="#"
                                   class="list-group-item d-flex justify-content-between align-items-center px-2 py-3 list-group-item-action">
                                    <span>Arizona</span><span>Min:$50</span>
                                </a>
                                <a href="#"
                                   class="list-group-item d-flex justify-content-between align-items-center px-2 py-3 list-group-item-action">
                                    <span>California</span><span>Min:$29</span>
                                </a>
                                <a href="#"
                                   class="list-group-item d-flex justify-content-between align-items-center px-2 py-3 list-group-item-action">
                                    <span>Colorado</span><span>Min:$80</span>
                                </a>
                                <a href="#"
                                   class="list-group-item d-flex justify-content-between align-items-center px-2 py-3 list-group-item-action">
                                    <span>Florida</span><span>Min:$90</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
 *@    <main>
        <!-- section -->
        <section id="orderApp">
            <div class="container">
                <!-- row -->
                <div class="row">
                    <!-- col -->
                    <partial name="_MembershipPartial" />
                    <div class="col-lg-9 col-md-8 col-12">
                        <div class="py-6 p-md-6 p-lg-10">
                            <!-- heading -->
                            <div class="d-flex justify-content-between">
                                <h2 class="mb-6">即時訂單</h2>
                                <div class="mb-2 mb-md-0">
                                    <select class="form-select">
                                        <option selected>Status</option>
                                        <option value="Success">Success</option>
                                        <option value="Pending">Pending</option>
                                        <option value="Cancel">Cancel</option>
                                    </select>
                                </div>
                            </div>

                            <div class="table-responsive-xxl border-0">
                                <!-- Table -->
                                <table class="table mb-0 text-nowrap table-centered ">
                                    <!-- Table Head -->
                                    <thead class="bg-light">
                                        <tr>
                                            <th>訂單編號</th>
                                            <th>訂單日期</th>
                                            <th>數量</th>
                                            <th>訂單狀態</th>
                                            <th>訂購總額</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody v-for="item in orders">
                                        <!-- Table body -->
                                        <tr>


                                            <td class="align-middle border-top-0">
                                                <a href="#" class="text-inherit">{{item.orderId}}</a>

                                            </td>
                                            <td class="align-middle border-top-0">
                                                {{item.orderDate}}

                                            </td>
                                            <td class="align-middle border-top-0">
                                                {{item.totalQuantity}}

                                            </td>
                                            <td class="align-middle border-top-0">
                                                <template v-if="item.statusId === 1">
                                                    <span class="badge bg-warning">{{item.status}}</span>
                                                </template>
                                                <template v-else-if="item.statusId === 2">
                                                    <span class="badge bg-info">{{item.status}}</span>
                                                </template>
                                                <template v-else-if="item.statusId === 3 ">
                                                    <span class="badge bg-secondary">{{item.status}}</span>
                                                </template>
                                                <template v-else-if="item.statusId === 4">
                                                    <span class="badge bg-primary">{{item.status}}</span>
                                                </template>
                                            </td>
                                            <td class="align-middle border-top-0">
                                                ${{item.subtotal+item.shippingFee}}
                                            </td>
                                            @* add eye collapse function *@
                                            <td class="text-muted align-middle border-top-0">
                                                <!-- Add collapse behavior to the eye button -->
                                                <a href="#" class="text-inherit"
                                                   data-bs-toggle="collapse"
                                                   :data-bs-target="'#orderDetails' + item.orderId"
                                                   data-bs-toggle="tooltip"
                                                   data-bs-placement="top"
                                                   data-bs-title="View">
                                                    <i class="feather-icon icon-eye"></i>
                                                </a>
                                            </td>
                                        </tr>
                                        <!-- Add a collapsible row for order details -->
                                        <tr>
                                            <td colspan="8" class="p-0">
                                                <div class="collapse" :id="'orderDetails' + item.orderId">
                                                    <!-- Include order details here -->
                                                    <div class="p-3">
                                                        <!-- Order details content goes here -->
                                                        <!-- Order details 起點 -->
                                                        <div class="row ">
                                                            <div class="col-xl-12 col-12 mb-5">
                                                                <!-- card -->
                                                                <div class="card h-100 card-lg">
                                                                    <div class="card-body p-6">
                                                                        <div class="d-md-flex justify-content-between">
                                                                            <div class="d-flex align-items-center mb-2 mb-md-0">
                                                                                <h2 class="mb-0">訂單明細</h2>

                                                                            </div>
                                                                            <!-- select option -->
                                                                            <div class="d-md-flex">

                                                                                <!-- button -->
                                                                                <div class="ms-md-3">
                                                                                    <template v-if="item.statusId === 1">
                                                                                        <a v-on:click="confirmCancelOrder(item)" href="#" class="btn btn-danger" data-bs-toggle="tooltip" data-bs-placement="top" :title="'取消時限: ' + (10-Math.round(item.orderDuration)) + '分鐘'">取消</a>
                                                                                    </template>
                                                                                    <template v-else>
                                                                                        <a v-on:click="confirmCompleteOrder(item)" href="#" class="btn btn-success">完成訂單</a>
                                                                                    </template>
                                                                                    <a href="#" class="btn btn-secondary" style="margin-left: 3px;">下載明細</a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="mt-8">
                                                                            <div class="row">
                                                                                <!-- address -->
                                                                                <div class="col-lg-4 col-md-4 col-12">
                                                                                    <div class="mb-6">
                                                                                        <h6>顧客資訊</h6>
                                                                                        <p class="mb-1 lh-lg">
                                                                                            {{item.userName}}<br>
                                                                                            {{item.userEmail}}<br>
                                                                                            {{item.userPhone}}
                                                                                        </p>
                                                                                        <a href="#">View Profile</a>
                                                                                    </div>
                                                                                </div>
                                                                                <!-- address -->
                                                                                <div class="col-lg-4 col-md-4 col-12">
                                                                                    <div class="mb-6">
                                                                                        <h6>收件地址</h6>
                                                                                        <p class="mb-1 lh-lg" style="white-space: normal;">{{item.address}}</p>
                                                                                    </div>
                                                                                </div>
                                                                                <!-- address -->
                                                                                <div class="col-lg-4 col-md-4 col-12">
                                                                                    <div class="mb-6">
                                                                                        <h6>訂單資訊</h6>
                                                                                        <p class="mb-1 lh-lg">
                                                                                            訂單編號: <span class="text-dark">{{item.orderId}}</span><br>
                                                                                            訂購日期: <span class="text-dark">{{item.orderDate}}</span><br>
                                                                                            訂購時間: <span class="text-dark">{{item.orderTime}}</span><br>
                                                                                            訂單金額: <span class="text-dark">${{item.subtotal+item.shippingFee}}</span>
                                                                                        </p>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-12">
                                                                            <div class="table-responsive">
                                                                                <!-- Table -->
                                                                                <table class="table mb-0 text-nowrap table-centered">
                                                                                    <!-- Table Head -->
                                                                                    <thead class="bg-light">
                                                                                        <tr>
                                                                                            <th>商品</th>
                                                                                            <th>單價</th>
                                                                                            <th>數量</th>
                                                                                            <th>總計</th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <!-- tbody -->
                                                                                    <tbody>
                                                                                        <tr v-for="product in item.orderDetails">
                                                                                            <td>
                                                                                                <a href="#" class="text-inherit">
                                                                                                    <div class="d-flex align-items-center">
                                                                                                        <div>
                                                                                                            <img v-if="product.photoPath" :src="product.photoPath" alt="" class="icon-shape icon-lg">
                                                                                                            <img v-else src="/images/Noimage.png" alt="Default Image" class="icon-shape icon-lg">
                                                                                                        </div>
                                                                                                        <div class="ms-lg-4 mt-2 mt-lg-0">
                                                                                                            <h5 class="mb-0 h6">
                                                                                                                {{product.productName}}
                                                                                                            </h5>

                                                                                                        </div>
                                                                                                    </div>
                                                                                                </a>
                                                                                            </td>
                                                                                            <td><span class="text-body">${{product.unitPrice}}</span></td>
                                                                                            <td>{{product.quantity}}</td>
                                                                                            <td>${{product.total}}</td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td class="border-bottom-0 pb-0"></td>
                                                                                            <td class="border-bottom-0 pb-0"></td>
                                                                                            <td colspan="1" class="fw-medium text-dark ">
                                                                                                <!-- text -->
                                                                                                小計 :
                                                                                            </td>
                                                                                            <td class="fw-medium text-dark ">
                                                                                                <!-- text -->
                                                                                                ${{item.subtotal}}
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td class="border-bottom-0 pb-0"></td>
                                                                                            <td class="border-bottom-0 pb-0"></td>
                                                                                            <td colspan="1" class="fw-medium text-dark ">
                                                                                                <!-- text -->
                                                                                                運費
                                                                                            </td>
                                                                                            <td class="fw-medium text-dark  ">
                                                                                                <!-- text -->
                                                                                                ${{item.shippingFee}}
                                                                                            </td>
                                                                                        </tr>

                                                                                        <tr>
                                                                                            <td></td>
                                                                                            <td></td>
                                                                                            <td colspan="1" class="fw-semi-bold text-dark ">
                                                                                                <!-- text -->
                                                                                                總額
                                                                                            </td>
                                                                                            <td class="fw-semi-bold text-dark ">
                                                                                                <!-- text -->
                                                                                                ${{item.subtotal+item.shippingFee}}
                                                                                            </td>
                                                                                        </tr>

                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="card-body p-6">
                                                                        <div class="row">
                                                                            <div class="col-md-3 mb-4 mb-lg-0 ">
                                                                                <h6>付款資訊</h6>
                                                                                <span class="d-block">{{item.paymentMethodＮame}}</span>
                                                                                <span class="d-block">{{item.paymentDate}} {{item.paymentTime}}</span>
                                                                            </div>
                                                                            <div class="col-md-3 mb-4 mb-lg-0">
                                                                                <h6>外送員: {{item.driverFullName}}</h6>
                                                                                <a href="#" class="btn btn-success btn-sm">聯繫外送員</a>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- Order details 終點 -->
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- modal -->

@*     <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasAccount" aria-labelledby="offcanvasAccountLabel">
        <!-- offcanvas header -->
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasAccountLabel">Offcanvas</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <!-- offcanvas body -->
        <div class="offcanvas-body">
            <ul class="nav flex-column nav-pills nav-pills-dark">
                <!-- nav item -->
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="account-orders.html">
                        <i class="feather-icon icon-shopping-bag me-2"></i>Your Orders
                    </a>
                </li>
                <!-- nav item -->
                <li class="nav-item">
                    <a class="nav-link " href="account-settings.html"><i class="feather-icon icon-settings me-2"></i>Settings</a>
                </li>
                <!-- nav item -->
                <li class="nav-item">
                    <a class="nav-link" href="account-address.html"><i class="feather-icon icon-map-pin me-2"></i>Address</a>
                </li>
                <!-- nav item -->
                <li class="nav-item">
                    <a class="nav-link" href="account-payment-method.html">
                        <i class="feather-icon icon-credit-card me-2"></i>Payment Method
                    </a>
                </li>
                <!-- nav item -->
                <li class="nav-item">
                    <a class="nav-link" href="account-notification.html">
                        <i class="feather-icon icon-bell me-2"></i>Notification
                    </a>
                </li>

            </ul>
            <hr class="my-6">
            <div>
                <!-- nav  -->
                <ul class="nav flex-column nav-pills nav-pills-dark">
                    <!-- nav item -->
                    <li class="nav-item">
                        <a class="nav-link " href="~/index.html"><i class="feather-icon icon-log-out me-2"></i>Log out</a>
                    </li>

                </ul>
            </div>
        </div>
    </div>
 *@

    @section Scripts{
        <script src="https://unpkg.com/vue@3.2.36/dist/vue.global.js"></script>

        <script>
            var baseAddress = "https://localhost:7042";

            const orderApp = Vue.createApp({
                data: function () {
                    return {
                        orders: [],
                        orderDetails: [],
                    }
                },
                computed: {

                },
                mounted: function () {
                    let _this = this;
                    _this.getOrder();

                },
                methods: {
                    confirmCancelOrder(item) {
                        if (item.orderDuration <= 10) {
                            if (window.confirm("是否確定取消訂單?")) {
                                this.cancelOrder(item);
                            }
                        }
                        else {
                            if (item.deliveryMethod === "自取") {
                                this.updateOrderStatus(item, 3);
                            }
                            else {
                                this.updateOrderStatus(item, 2);
                            }
                            // alert("取消時間已過")
                        }
                    },
                    confirmCompleteOrder(item) {
                        if (window.confirm("是否確定完成訂單?")) {
                            this.completeOrder(item);
                        }
                    },
                    cancelOrder(item) {

                        this.updateOrderStatus(item, 7)
                        item.statusId = 7;
                        this.orders = this.orders.filter(order => order.orderId !== item.orderId);
                    },
                    completeOrder(item) {
                        this.updateOrderStatus(item, 6)
                        item.statusId = 6;
                        this.orders = this.orders.filter(order => order.orderId !== item.orderId);
                    },
                    // **asynchronous nature of the fetch operation**
                    updateOrderStatus(item, newStatusId) {

                        fetch(`${baseAddress}/api/RealTimeOrdersapi/${item.orderId}`, {
                            method: "PUT",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify({
                                orderId: item.orderId,
                                statusId: newStatusId,
                            }),
                        }).then(response => {
                            if (!response.ok) {
                                throw new Error(`HTTP error! Status: ${response.status}`);
                                alert("成功");
                            }
                        }).then(data => {
                            // console.log(data)
                        }).catch(error => {
                            console.error("PUT 請求發生錯誤:", error);
                            // console.log(error);
                        });
                    },
                    getOrder() {
                        let _this = this;
                        var userId = "U001"
                        fetch(`${baseAddress}/api/RealTimeOrdersapi/${userId}`, { method: "GET" })
                            .then(response => {
                                if (!response.ok) {
                                    throw new Error(`HTTP error! Status: ${response.status}`);
                                }
                                return response.json();
                            })
                            .then(data => {
                                // alert(JSON.stringify(data));

                                _this.orders = data;
                                // _this.orderDetails = data[0].orderDetails;

                            }).catch(error => {
                                alert(error);
                            });
                    },
                }
            }).mount("#orderApp")
        </script>

        <!-- Libs JS -->
        <script src="~/assets/libs/jquery/dist/jquery.min.js"></script>
        @* <script src="~/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script> *@
        <script src="~/assets/libs/simplebar/dist/simplebar.min.js"></script>

        <!-- Theme JS -->
        <script src="~/assets/js/theme.min.js"></script>
    }

</body>

